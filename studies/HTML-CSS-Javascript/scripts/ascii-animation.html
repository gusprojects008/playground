<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Animação ASCII</title>
    <style>
        /* Estilos básicos para criar o ambiente */
        body {
            margin: 0;
            overflow: hidden; /* Esconde as barras de rolagem */
            background-color: #000000;
            color: #0dff00; /* Cor verde "hacker" */
            font-family: 'Courier New', Courier, monospace;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
        }

        /* O container onde a animação acontece */
        #animation-container {
            position: relative; /* Necessário para posicionar os caracteres */
            width: 80vw;
            height: 80vh;
            font-size: 16px;
            line-height: 1;
        }

        /* Estilo para cada caractere (0 ou 1) */
        #animation-container span {
            position: absolute;
            will-change: transform, opacity; /* Otimização para o navegador */
            transition: transform 0.2s ease-out, opacity 0.5s ease-in-out;
        }
    </style>
</head>
<body>

    <div id="animation-container"></div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const container = document.getElementById('animation-container');
            if (!container) return;

            // --- CONFIGURAÇÕES ---
            const GRID_WIDTH = 50;  // Quantos caracteres na largura
            const GRID_HEIGHT = 25; // Quantos caracteres na altura
            const DENSITY = 0.5;    // Quão denso é o preenchimento (0 a 1)
            
            const ANIMATION_DURATION = 8000; // 8 segundos em milissegundos
            const EXPLOSION_TIME = 6000;     // 6 segundos em milissegundos
            const EXPLOSION_STRENGTH = 150;  // Força da "explosão"
            // ---------------------

            const particles = [];
            const containerWidth = container.offsetWidth;
            const containerHeight = container.offsetHeight;
            const cellWidth = containerWidth / GRID_WIDTH;
            const cellHeight = containerHeight / GRID_HEIGHT;

            // 1. CRIA OS CARACTERES (PARTÍCULAS)
            function setup() {
                for (let y = 0; y < GRID_HEIGHT; y++) {
                    for (let x = 0; x < GRID_WIDTH; x++) {
                        if (Math.random() < DENSITY) {
                            const char = Math.random() < 0.5 ? '0' : '1';
                            const span = document.createElement('span');
                            span.textContent = char;

                            const initialX = x * cellWidth;
                            const initialY = y * cellHeight;
                            
                            span.style.left = `${initialX}px`;
                            span.style.top = `${initialY}px`;

                            container.appendChild(span);

                            particles.push({
                                element: span,
                                x: initialX,
                                y: initialY,
                                exploded: false,
                                vx: 0, // velocidade horizontal
                                vy: 0, // velocidade vertical
                            });
                        }
                    }
                }
            }

            // 2. CONTROLA A ANIMAÇÃO A CADA FRAME
            function animate(startTime) {
                const elapsedTime = Date.now() - startTime;

                // Para a animação após a duração total
                if (elapsedTime > ANIMATION_DURATION) {
                    container.innerHTML = ''; // Limpa a tela para o seu canvas
                    return;
                }

                const inExplosionPhase = elapsedTime >= EXPLOSION_TIME;

                particles.forEach(p => {
                    if (inExplosionPhase) {
                        // FASE 2: EXPLOSÃO E MOVIMENTO
                        if (!p.exploded) {
                            // Define uma velocidade aleatória no momento da explosão
                            const angle = Math.random() * 2 * Math.PI;
                            const speed = Math.random() * EXPLOSION_STRENGTH;
                            p.vx = Math.cos(angle) * speed / 60; // dividido por 60 para suavizar
                            p.vy = Math.sin(angle) * speed / 60;
                            p.exploded = true;
                        }
                        
                        // Atualiza a posição
                        p.x += p.vx;
                        p.y += p.vy;

                        // Aplica um pouco de "gravidade" ou atrito
                        p.vy += 0.05; 
                        p.vx *= 0.99;

                        p.element.style.transform = `translate(${p.x - parseFloat(p.element.style.left)}px, ${p.y - parseFloat(p.element.style.top)}px)`;

                    } else {
                        // FASE 1: PISCANDO E PULSANDO
                        const currentSecond = Math.floor(elapsedTime / 1000);
                        const timeWithinSecond = (elapsedTime % 1000) / 1000;

                        // Efeito de piscar lentamente
                        p.element.style.opacity = 0.5 + Math.sin(elapsedTime / 500) * 0.5;

                        // Efeito de pulso a cada segundo
                        if (timeWithinSecond < 0.2) { // Pulsa nos primeiros 200ms de cada segundo
                           p.element.style.transform = `scale(${1 + (0.2 - timeWithinSecond) * 2})`; // Aumenta e diminui
                        } else {
                           p.element.style.transform = 'scale(1)';
                        }
                    }
                });

                requestAnimationFrame(() => animate(startTime));
            }

            // Inicia tudo
            setup();
            animate(Date.now());
        });
    </script>

</body>
</html>
